{{- $slack := (protonPassJSON "pass://Unbound Infrastructure/slack").item.content.note -}}
{{- $dockercfg := (protonPassJSON "pass://Unbound Infrastructure/dockercfg").item.content.note -}}
{{- $auths := (protonPassJSON "pass://Personal/.auths").item.content.note -}}
{{- $grafana := (protonPassJSON "pass://Unbound Infrastructure/grafana-cloud").item.content.note -}}
{{- $gitea := (protonPassJSON "pass://Unbound Infrastructure/gitea").item.content.note -}}
{{- $k8s := (protonPassJSON "pass://Unbound Infrastructure/k8s").item.content.note -}}
slack = {
  ops          = {{ regexFind "ops:[^\n]*" $slack | trimPrefix "ops:" | trim | quote }}
  gitlab_ci    = {{ regexFind "gitlabCi:[^\n]*" $slack | trimPrefix "gitlabCi:" | trim | quote }}
  dancefinder  = {{ regexFind "dancefinder:[^\n]*" $slack | trimPrefix "dancefinder:" | trim | quote }}
  shiny        = {{ regexFind "shiny:[^\n]*" $slack | trimPrefix "shiny:" | trim | quote }}
  hifi         = {{ regexFind "hifi:[^\n]*" $slack | trimPrefix "hifi:" | trim | quote }}
  eventsourced = {{ regexFind "eventsourced:[^\n]*" $slack | trimPrefix "eventsourced:" | trim | quote }}
  angus        = {{ regexFind "angus:[^\n]*" $slack | trimPrefix "angus:" | trim | quote }}
}
docker_config                  = <<EOT
{{ $dockercfg }}
EOT
gitlab_provider_token          = {{ regexFind "GitlabTerraformToken:[^\n]*" $auths | trimPrefix "GitlabTerraformToken:" | trim | quote }}
grafana_cloud_api_key          = {{ regexFind "terraform:[^\n]*" $grafana | trimPrefix "terraform:" | trim | quote }}
grafana_oncall_token           = {{ regexFind "terraformOnCall:[^\n]*" $grafana | trimPrefix "terraformOnCall:" | trim | quote }}
grafana_oncall_username        = "argoyle"
gitea_admin_password           = {{ regexFind "AdminPassword:[^\n]*" $gitea | trimPrefix "AdminPassword:" | trim | quote }}
gitea_db_password              = {{ regexFind "DbPassword:[^\n]*" $gitea | trimPrefix "DbPassword:" | trim | quote }}
gitea_secret_key               = {{ regexFind "SecretKey:[^\n]*" $gitea | trimPrefix "SecretKey:" | trim | quote }}
gitea_internal_token           = {{ regexFind "InternalToken:[^\n]*" $gitea | trimPrefix "InternalToken:" | trim | quote }}
gitea_lfs_jwt_secret           = {{ regexFind "LfsJwtSecret:[^\n]*" $gitea | trimPrefix "LfsJwtSecret:" | trim | quote }}
gitea_oauth2_jwt_secret        = {{ regexFind "OauthJwtSecret:[^\n]*" $gitea | trimPrefix "OauthJwtSecret:" | trim | quote }}
gitea_runner_token             = {{ regexFind "RunnerToken:[^\n]*" $gitea | trimPrefix "RunnerToken:" | trim | quote }}
gitea_runner_registry_token    = {{ regexFind "BuildtoolsToken:[^\n]*" $gitea | trimPrefix "BuildtoolsToken:" | trim | quote }}
renovate_gitea_token           = {{ regexFind "RenovateToken:[^\n]*" $gitea | trimPrefix "RenovateToken:" | trim | quote }}
gitea_admin_api_token          = {{ regexFind "AdminToken:[^\n]*" $gitea | trimPrefix "AdminToken:" | trim | quote }}
gitea_release_token            = {{ regexFind "ReleaseToken:[^\n]*" $gitea | trimPrefix "ReleaseToken:" | trim | quote }}
docker_hub_username            = "joakim@unbound.se"
docker_hub_token               = {{ regexFind "DockerHubToken:[^\n]*" $k8s | trimPrefix "DockerHubToken:" | trim | quote }}
github_username                = "argoyle"
github_token                   = {{ regexFind "GithubToken:[^\n]*" $k8s | trimPrefix "GithubToken:" | trim | quote }}
gitea_registry_pull_token      = {{ regexFind "GiteaPullToken:[^\n]*" $gitea | trimPrefix "GiteaPullToken:" | trim | quote }}
renovate_github_token          = {{ regexFind "RenovateGithubToken:[^\n]*" $auths | trimPrefix "RenovateGithubToken:" | trim | quote }}
gitea_ssh_host_ed25519_key     = <<EOT
{{ regexFind "SshHostKeyEDDSA:[^\n]*" $gitea | trimPrefix "SshHostKeyEDDSA:" | trim | b64dec -}}
EOT
gitea_ssh_host_ed25519_key_pub = {{ regexFind "SshHostKeyPubEDDSA:[^\n]*" $gitea | trimPrefix "SshHostKeyPubEDDSA:" | trim | quote }}
gitea_ssh_host_rsa_key         = <<EOT
{{ regexFind "SshHostKeyRSA:[^\n]*" $gitea | trimPrefix "SshHostKeyRSA:" | trim | b64dec -}}
EOT
gitea_ssh_host_rsa_key_pub     = {{ regexFind "SshHostKeyPubRSA:[^\n]*" $gitea | trimPrefix "SshHostKeyPubRSA:" | trim | quote }}
gitea_ssh_host_ecdsa_key       = <<EOT
{{ regexFind "SshHostKeyECDSA:[^\n]*" $gitea | trimPrefix "SshHostKeyECDSA:" | trim | b64dec -}}
EOT
gitea_ssh_host_ecdsa_key_pub   = {{ regexFind "SshHostKeyPubECDSA:[^\n]*" $gitea | trimPrefix "SshHostKeyPubECDSA:" | trim | quote }}
